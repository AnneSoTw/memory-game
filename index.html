<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Wedding Memory Game</title>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Merriweather&display=swap" rel="stylesheet">
  <style>
        body {
            font-family: 'Merriweather', serif;
            background: linear-gradient(to bottom, #f5f0e8, #e6dacb);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
            color: #5d4037;
        }
        .game-container {
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            padding: 2.5rem;
            width: 100%;
            max-width: 650px;
            text-align: center;
            border: 1px solid #d7ccc8;
        }
        .romantic-font {
            font-family: 'Dancing Script', cursive;
            color: #8d6e63;
        }
        .game-button {
            font-family: 'Merriweather', serif;
            font-weight: bold;
            background-image: linear-gradient(to right, #d4af37, #c09b2d);
            color: white;
            padding: 0.8rem 1.8rem;
            border: none;
            border-radius: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-top: 1.5rem;
            display: inline-block;
        }
        .game-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            filter: brightness(1.05);
        }
        .game-button:active {
            transform: translateY(0);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .option-button {
            display: block;
            width: 100%;
            background-color: #f5f5f5;
            color: #5d4037;
            padding: 0.85rem;
            margin-top: 0.85rem;
            border-radius: 0.5rem;
            border: 1px solid #e0e0e0;
            transition: all 0.2s ease;
            text-align: left;
            font-size: 0.95rem;
            font-family: 'Merriweather', serif;
        }
        .option-button:hover {
            border-color: #d4af37;
            background-color: #ffffff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .modal {
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(93, 64, 55, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal.show {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: #fffdf9;
            padding: 2.5rem;
            border-radius: 1rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            text-align: center;
            max-width: 90%;
            width: 450px;
            border: 1px solid #e0e0e0;
        }
        .modal-message {
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
            color: #5d4037;
        }
        .modal-button {
             font-family: 'Merriweather', serif;
             font-weight: bold;
             background-color: #a5d6a7;
             color: #388e3c;
             padding: 0.6rem 1.2rem;
             border: none;
             border-radius: 2rem;
             cursor: pointer;
             transition: background-color 0.3s ease;
             font-size: 0.8rem;
             text-transform: uppercase;
        }
         .modal-button:hover {
             background-color: #81c784;
         }
         /* Award Certificate */
         .award-certificate {
            border: 8px double #c09b2d;
            padding: 2rem;
            margin-top: 2.5rem;
            background-color: #fffaf0;
            border-radius: 0.5rem;
            position: relative; /* Keep relative for potential future absolute elements inside */
            text-align: center; /* Center align contents */
         }
         .award-title {
            font-family: 'Dancing Script', cursive;
            color: #a1887f;
            font-size: 2rem;
            margin-bottom: 1.5rem;
         }
         .award-text {
            color: #795548;
            font-size: 1rem;
            line-height: 1.7;
            margin-bottom: 1.5rem; /* Add space below text */
         }
         .award-seal {
            /* Removed position: absolute */
            display: inline-flex; /* Use inline-flex to center content */
            justify-content: center;
            align-items: center;
            width: 60px;
            height: 60px;
            background-color: #e57373;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
            font-family: sans-serif;
            margin-top: 1rem; /* Add space above the seal */
         }
         .award-seal::before {
            content: '‚ô•';
         }
         /* Style for the new text below the seal */
         .save-the-date-text {
            margin-top: 0.75rem; /* Space below seal */
            font-size: 0.9rem;
            color: #a1887f; /* Muted brown */
            font-weight: bold;
         }
         /* Style for email status message */
        #email-status {
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            font-weight: bold;
        }
        .email-success { color: #388e3c; }
        .email-error { color: #c62828; }
        .email-sending { color: #6d4c41; }
        /* Input field styling */
        input[type="text"], input[type="email"] {
            font-family: 'Merriweather', serif;
            border: 1px solid #d7ccc8;
            border-radius: 0.5rem;
        }
        input[type="text"]:focus, input[type="email"]:focus {
             border-color: #d4af37;
             box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2);
             outline: none;
        }
        /* Score/Timer Text */
        .score-time-text {
            font-family: 'Merriweather', serif;
            font-weight: bold;
            color: #8d6e63;
        }
        .question-info-text {
             color: #a1887f;
        }
  </style>
</head>
<body>
  <div class="game-container">
        <div id="start-screen">
            <h1 class="text-4xl font-bold mb-6 romantic-font">Wedding Memory Game!</h1>
            <p class="mb-5 text-gray-600">Please enter your details:</p>
            <input type="text" id="nickname" placeholder="Your Name" class="w-full p-3 border rounded-lg mb-3 focus:outline-none" required>
            <input type="email" id="email" placeholder="Your Email" class="w-full p-3 border rounded-lg mb-4 focus:outline-none" required>
            <button id="start-button" onclick="startGame()" class="game-button">Start Quiz</button>
            <p id="start-error" class="text-red-600 mt-3 text-sm"></p>
        </div>
    <div id="game-board" style="display:none;"></div>
    <div id="game-end" style="display:none;"></div>
  </div>

  <script>
        // --- EmailJS Configuration ---
        const EMAILJS_SERVICE_ID = 'service_3qozdwc';
        const EMAILJS_TEMPLATE_ID = 'template_q69067c';
        const EMAILJS_PUBLIC_KEY = 'cDxOmMxePGWSWrLPG';
    const images = [
      'https://picsum.photos/100?1', 'https://picsum.photos/100?2', 'https://picsum.photos/100?3',
      'https://picsum.photos/100?4', 'https://picsum.photos/100?5', 'https://picsum.photos/100?6',
      'https://picsum.photos/100?7', 'https://picsum.photos/100?8', 'https://picsum.photos/100?9',
      'https://picsum.photos/100?10'
    ];
    const backImage = 'https://yourdomain.com/your-logo.jpg';
    let cards = [], firstCard = null, secondCard = null;
    let matches = 0, score = 0, fails = 0;
    let startTime;

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function startGame() {
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      if (!name || !email) return alert("Please enter both name and email");

      document.getElementById('user-form').style.display = 'none';
      document.getElementById('game-end').style.display = 'none';
      document.getElementById('game-board').style.display = 'grid';

      let doubleImages = [...images, ...images];
      shuffle(doubleImages);
      cards = doubleImages.map((src, idx) => ({ id: idx, src, matched: false }));

      const board = document.getElementById('game-board');
      board.innerHTML = '';
      board.style.gridTemplateColumns = 'repeat(5, 1fr)';
      board.style.gap = '8px';

      cards.forEach(card => {
        const div = document.createElement('div');
        div.className = 'card';
        div.innerHTML = `<img src="${backImage}" data-id="${card.id}" class="card-img" style="width: 100px; height: 100px; cursor: pointer; border-radius: 0.5rem;">`;
        board.appendChild(div);
      });

      board.querySelectorAll('img').forEach(img => img.addEventListener('click', onCardClick));
      matches = 0;
      score = 0;
      fails = 0;
      startTime = new Date();
    }

    function onCardClick(e) {
      const id = parseInt(e.target.dataset.id);
      const card = cards.find(c => c.id === id);
      if (card.matched || e.target.classList.contains('flipped')) return;

      e.target.src = card.src;
      e.target.classList.add('flipped');

      if (!firstCard) {
        firstCard = { ...card, element: e.target };
      } else if (!secondCard && firstCard.id !== card.id) {
        secondCard = { ...card, element: e.target };

        if (firstCard.src === secondCard.src) {
          setTimeout(() => {
            firstCard.element.style.visibility = 'hidden';
            secondCard.element.style.visibility = 'hidden';
            cards[firstCard.id].matched = true;
            cards[secondCard.id].matched = true;
            score++;
            matches++;
            resetSelection();
            if (matches === images.length) endGame();
          }, 400);
        } else {
          setTimeout(() => {
            firstCard.element.src = backImage;
            secondCard.element.src = backImage;
            firstCard.element.classList.remove('flipped');
            secondCard.element.classList.remove('flipped');
            fails++;
            score -= 2;
            resetSelection();
          }, 700);
        }
      }
    }

    function resetSelection() {
      firstCard = null;
      secondCard = null;
    }

function endGame() {
      const duration = Math.round((new Date() - startTime) / 1000);
      document.getElementById('game-board').style.display = 'none';
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      document.getElementById('game-end').innerHTML = `
        <div class="award-certificate">
          <div class="award-title">Certificate of Memory Mastery</div>
          <div class="award-text">Congratulations ${name} üíñ<br>You completed the game with a score of ${score}<br>in ${duration} seconds!</div>
          <div class="save-the-date-text">Save this date in your heart üíå</div>
          <button class="game-button" onclick="replayGame()">üîÅ Play Again</button>
        </div>
      `;
      document.getElementById('game-end').style.display = 'block';

      // EmailJS
      emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, {
        nickname: name,
        email: email,
        score: score,
        time: duration
      }, EMAILJS_PUBLIC_KEY);
    }

    function replayGame() {
      document.getElementById('game-end').style.display = 'none';
      startGame(); // reshuffle and restart
    }
  </script>

  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <script>
    (function() {
      emailjs.init(EMAILJS_PUBLIC_KEY);
    })();
  </script>
</body>
</html>
